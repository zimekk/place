(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[609],{79032:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>$});var a=n(2784),l=n(85062),o=n.n(l),r=n(41698),s=n(43340),c=n(93645),i=n(46604),u=n(87319),m=n(17370),p=n(9725),d=n(30195),f=n(45392),g=n(95340),h=n(33654),E=n(74061),b=n(72779),v=n.n(b),C=n(98212);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x.apply(this,arguments)}const k="\n",y=(e,t=0)=>{return(n=e.match(/^([0-9.]*),([0-9.]*)\|(.*)$/))?(([e,n,a,l])=>({i:t,position:{lat:n,lng:a},name:l}))(n):null;var n},S=({name:e,lat:t,lng:n})=>`${t.toFixed(4)},${n.toFixed(4)}|${e}`,w=(0,a.forwardRef)((({children:e,editable:t,onChange:n},l)=>a.createElement("div",{className:v()(C.Z.Editor,t&&C.Z.Editable)},t?a.createElement("textarea",{ref:l,value:e,onChange:e=>n(e.target.value)}):a.createElement("pre",null,e))));class j extends a.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}render(){const{error:e}=this.state;if(e)return a.createElement("pre",{className:v()(C.Z.Error),children:e.toString()});try{return a.createElement(a.Fragment,null,this.props.children)}catch(e){return!1}}}function z({children:e}){return a.createElement(j,null,a.createElement(f.Zo,{components:{a:({...e})=>a.createElement("a",x({},e,{target:"_blank",rel:"noopener noreferrer"}))}},a.createElement(g.Z,null,e)))}function Z({children:e}){const t=(0,a.useRef)(null);return(0,a.useEffect)((()=>{E.toCanvas(t.current,e,{margin:0,scale:4},(function(e){e&&console.error(e)}))})),a.createElement("div",null,a.createElement("a",{href:e,target:"_blank",style:{textDecoration:"none"}},a.createElement("canvas",{ref:t,width:"132",height:"132"})))}function L({position:e,children:t,onOpen:n,setPosition:l}){const o=(0,a.useRef)(null),c=(0,a.useMemo)((()=>({dragend(){const e=o.current;null!==e&&l(e.getLatLng())},popupopen:n})),[]);return a.createElement(r.J,{draggable:!0,eventHandlers:c,position:e,ref:o},a.createElement(s.G,{minWidth:132,maxWidth:132},a.createElement("span",null,a.createElement(z,null,t),a.createElement(Z,null,(({lat:e,lng:t})=>`https://google.com/maps/dir/?api=1&destination=${e},${t}`)(e)))))}function R(){const e=(0,c.Sx)(),t=(0,a.useCallback)((t=>{t.preventDefault(),e.locate({setView:!0})}),[e]);return a.createElement("div",{className:"leaflet-top leaflet-left",style:{top:80,fontSize:16}},a.createElement("div",{className:"leaflet-control-locate leaflet-bar leaflet-control"},a.createElement("a",{className:"leaflet-bar-part leaflet-bar-part-single",title:"Locate",href:"#",onClick:t},a.createElement(m.G,{icon:p.KS0}))))}function D({onAddMarker:e}){const t=(0,c.Sx)(),n=(0,a.useCallback)((n=>{n.preventDefault(),e(t.getCenter())}),[t]);return a.createElement("div",{className:"leaflet-top leaflet-right",style:{fontSize:16}},a.createElement("div",{className:"leaflet-control-locate leaflet-bar leaflet-control"},a.createElement("a",{className:"leaflet-bar-part leaflet-bar-part-single",title:"Locate",href:"#",onClick:n},a.createElement(m.G,{icon:p.FGq}))))}const N=d.z.object({lat:d.z.string(),lon:d.z.string(),display_name:d.z.string()}).array(),P={};function M({map:e,editable:t,setEditable:n,setText:l}){const[o]=(0,a.useState)((()=>({position:e.getCenter(),zoom:e.getZoom()}))),[r,s]=(0,a.useState)((()=>"chmielna, warszawa")),[c,i]=(0,a.useState)(e.getCenter()),u=(0,a.useCallback)((()=>{e.setView(o.position,o.zoom)}),[e]),m=(0,a.useCallback)((()=>{i(e.getCenter())}),[e]),p=(0,a.useCallback)((e=>{const{latlng:t,radius:n}=e;console.log({latlng:t,radius:n})}),[]);(0,a.useEffect)((()=>(e.on("locationfound",p).on("move",m),()=>{e.off("locationfound",p).off("move",m)})),[e,m]);const d=(0,a.useCallback)((e=>{e.preventDefault(),(e=>{return e in P?Promise.resolve(P[e]):((t=new URL("https://nominatim.openstreetmap.org/search")).searchParams.set("q",e),t.searchParams.set("format","jsonv2"),console.log(["fetch"]),fetch(t.toString()).then((e=>e.json())).then((e=>N.parseAsync(e))).then((t=>(P[e]=t,t))));var t})(r).then((e=>e.map((({lat:e,lon:t,display_name:n})=>`${e},${t}|${n}`)))).then((e=>{l((t=>{const n=e[0],a=t.split(k);return a.includes(n)?t:(console.log(a.concat(n).join(k)),a.concat(n).join(k))}))}))}),[r]);return a.createElement("div",{className:v()(C.Z.DisplayPosition)},a.createElement("form",{onSubmit:d},a.createElement("input",{type:"search",value:r,onChange:(0,a.useCallback)((({target:e})=>s(e.value)),[])}),a.createElement("button",{type:"submit"},"Search"),"latitude: ",c.lat.toFixed(4),", longitude:"," ",c.lng.toFixed(4)," ",a.createElement("button",{type:"button",onClick:u},"Reset"),a.createElement("button",{type:"button",onClick:()=>e.locate({setView:!0})},"Locate"),a.createElement("button",{type:"button",onClick:()=>n((e=>!e))},t?"Ok":"Edit")))}function q({setMap:e}){const t=(0,c.Sx)();return(0,a.useEffect)((()=>{e(t)}),[t]),null}function $(){const e=(0,a.useRef)(null),[t,l]=(0,a.useState)((()=>(([e,t])=>{try{return decodeURIComponent(escape((n=t,h.ZP.inflate(window.atob(n).split("").map((e=>e.charCodeAt(0))),{to:"string"}))))}catch(e){return""}var n})(decodeURI(location.hash).match(/^#(.+)/)||[])||[S({name:"Aleja Wilanowska",lat:52.1724,lng:21.0549}),S({name:"Chmielna",lat:52.228,lng:20.9954})].join(k))),[r,s]=(0,a.useState)((()=>!1));(0,a.useEffect)((()=>{o().Icon.Default.mergeOptions({iconRetinaUrl:n(1963).Z,iconUrl:n(20379).Z,shadowUrl:n(26179).Z})}),[]),(0,a.useEffect)((()=>(e=>document.location.replace(`#${(e=>window.btoa(String.fromCharCode.apply(null,h.ZP.deflate(e))))(unescape(encodeURIComponent(e)))}`))(t)),[t]);const c=(0,a.useMemo)((()=>t.split(k).map(y).filter(Boolean).map((({i:n,name:a,position:o})=>({i:n,name:a,position:o,setSelection:()=>{const a=e.current;if(a){a.focus();const e=t.split(k),l=e.slice(0,n+1).join(k).length;a.setSelectionRange(l-e[n].length,l)}},setPosition:({lat:e,lng:t})=>l((a=>a.split(k).map(((a,l)=>n===l?(({name:n})=>S({name:n,lat:e,lng:t}))(y(a)):a)).join(k)))})))),[t]),m=(0,a.useMemo)((()=>o().featureGroup(c.map((({position:{lat:e,lng:t}})=>o().marker([e,t])))).getBounds()),[]),[p,d]=(0,a.useState)(null),f=(0,a.useCallback)((({lat:e,lng:t})=>{l((n=>S({name:`lat: ${e}, lng: ${t}`,lat:e,lng:t}).concat(k).concat(n)))}),[p]),g=(0,a.useMemo)((()=>a.createElement(i.h,{bounds:m,zoom:13,className:v()(C.Z.Map)},a.createElement(q,{setMap:d}),a.createElement(u.I,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),c.map((({i:e,position:t,name:n,setPosition:l,setSelection:o})=>a.createElement(L,{key:e,onOpen:o,position:t,setPosition:l},n))),a.createElement(R,null),a.createElement(D,{onAddMarker:f}))),[c]);return a.createElement("div",{className:v()(C.Z.Layout)},p?a.createElement(M,{map:p,editable:r,setEditable:s,setText:l}):null,g,a.createElement(w,{ref:e,onChange:l,editable:r},t))}},30129:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(39601),l=n.n(a),o=n(82609),r=n.n(o),s=n(99138),c=r()(l());c.i(s.Z),c.push([e.id,".vs0vgVhvMSBg8q667vQ3{height:50vh;border:2px solid red}.zD5gR7xpqQaL4KjHYa1g{display:flex;height:10vh;border:2px solid rgba(0,0,0,0)}.zD5gR7xpqQaL4KjHYa1g.fLB3ZmWIUA2ewV4mDvs6{border-color:blue}.zD5gR7xpqQaL4KjHYa1g pre,.zD5gR7xpqQaL4KjHYa1g textarea{font-size:12px;margin:0;padding:4px}.zD5gR7xpqQaL4KjHYa1g textarea{border:0;flex:1}.sl2LinkJXoOENPtNqeil{color:red}",""]),c.locals={Map:"vs0vgVhvMSBg8q667vQ3",Editor:"zD5gR7xpqQaL4KjHYa1g",Editable:"fLB3ZmWIUA2ewV4mDvs6",Error:"sl2LinkJXoOENPtNqeil"};const i=c},98212:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var a=n(46062),l=n.n(a),o=n(44036),r=n.n(o),s=n(96793),c=n.n(s),i=n(17892),u=n.n(i),m=n(11173),p=n.n(m),d=n(42464),f=n.n(d),g=n(30129),h={};h.styleTagTransform=f(),h.setAttributes=u(),h.insert=c().bind(null,"head"),h.domAPI=r(),h.insertStyleElement=p();var E=l()(g.default,h);if(!g.default.locals||e.hot.invalidate){var b=!g.default.locals,v=b?g:g.default.locals;e.hot.accept(30129,(t=>{g=n(30129),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if((!n||"default"!==a)&&e[a]!==t[a])return!1;for(a in t)if(!(n&&"default"===a||e[a]))return!1;return!0}(v,b?g:g.default.locals,b)?(v=b?g:g.default.locals,E(g.default)):e.hot.invalidate()}))}e.hot.dispose((function(){E()}));const C=g.default&&g.default.locals?g.default.locals:void 0},18245:()=>{},60609:()=>{},71220:()=>{},99586:()=>{},4448:()=>{}}]);